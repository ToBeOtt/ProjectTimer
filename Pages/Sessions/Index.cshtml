@page
@model ProjectTimer.Pages.Sessions.IndexModel
@{
}
@if (HttpContext.Session.GetString("_Id") == null) 
{
<h5 style="text-align: center;">Tryck på ett projekt för att starta timer</h5>
<br />
    <form method="post" asp-page-handler="StartClock">
    <h6 style="text-align: center;">Lägg till arbetsbeskrivning</h6>
    <div class="mb-3">
        <textarea class="form-control" name="taskDescription" rows="3"></textarea>
    </div>

    <ul class="nav justify-content-center">
        @foreach (var project in Model.ProjectList)
        {
        <li class="nav-item">
                <div class="mb-3">
                    <button type="submit" class="btn btn-outline-success" name="pID" value="@project.Id">
                        @project.Name
                    </button>
                </div>
        </li> 
        }
    </ul>
</form>

    @if (Model.SummaryOfSessionClocks != null)
    {
        <h5>Dagens avslutade timers</h5>
        @foreach (var projectclock in Model.SummaryOfSessionClocks)
        {
        <li class="nav-item">
                <div class="mb-3">
                    <h6>@projectclock.Project.Name</h6>
                    <p>@projectclock.Description</p>
                </div>
        </li> 
        }
    }


}

@if (HttpContext.Session.GetString("_Id") != null)
{
    <div class="clockSection">
        <h3>Timer pågående för @Model.Clock.Project.Name </h3>
        <hr>

        <form method="post" asp-page-handler="EndClock">
            <div class="mb-3">
                <button type="submit" class="btn btn-outline-success" 
                name="clockId" value="@Model.Clock.Id">
                    Avsluta timer
                </button>
            </div>
        </form>
    </div>
    
}















    

